<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="white">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <script>
        var deviceWidth = document.documentElement.clientWidth;
        if (deviceWidth > 640) deviceWidth = 640;
        document.documentElement.style.fontSize = deviceWidth / 7.5 + 'px';
    </script>
    <title>购物活动</title>
    <link rel="stylesheet" href="./styles/base.css">
    <link rel="stylesheet" href="./styles/common.css">
    <link rel="stylesheet" href="./styles/index.css">
</head>

<body>
    <section class="userinfo">
        <div class="container">
            <div class="userinfo-wrap">
                <div class="useravater-wrap">
                    <img src="./images/avater1.png" alt="">
                    <div>
                        <p>昵XXXX称</p>
                        <p>50金币</p>
                    </div>
                </div>
                <img src="./images/list.png" alt="" class='user-list'>
            </div>
        </div>
    </section>

    <section class="lottery-wrapper">
        <div class="container">
            <div class="section-title">
                <p>购物抽奖</p>
                <a href="rule.html">抽奖规则></a>
            </div>
            <div class="lottery">
                <img src="./images/lottery.png" alt="" class="lottery-bg">
                <p class="lottery-indicator">( <span>0</span> )</p>
                <div class="lottery-result">
                    <img src="./images/avater2.png" alt="">
                    <span>XXXX购物抽中500金币</span>
                </div>
            </div>

        </div>
    </section>

    <section class="signin">
        <div class="container">
            <div class="section-title">
                <p>签到奖励</p>
            </div>
            <div class="sign-total">
                <p>已连续签到<span>2</span>天</p>
                <p class="todayInNow">今日签到+<span>5</span>金币</p>
            </div>
            <div class="sign-detail">
                <div class='sign-item signed'>
                    <div class='sign-day'>2</div>
                    <div class='sign-status'>
                        <img src="./images/sign-on.png" alt="">
                        <p></p>
                    </div>
                </div>
                <div class='sign-item on'>
                    <div class='sign-day'>2</div>
                    <div class='sign-status'>
                        <img src="./images/sign-onbig.png" alt="">
                        <p></p>
                    </div>
                </div>
                <div class='sign-item'>
                    <div class='sign-day'>2</div>
                    <div class='sign-status'>
                        <img src="./images/sign-no.png" alt="">
                        <p></p>
                    </div>
                </div>
                <div class='sign-item'>
                    <div class='sign-day'>2</div>
                    <div class='sign-status'>
                        <img src="./images/sign-no.png" alt="">
                        <p></p>
                    </div>
                </div>
                <div class='sign-item'>
                    <div class='sign-day'>2</div>
                    <div class='sign-status'>
                        <img src="./images/sign-no.png" alt="">
                        <p></p>
                    </div>
                </div>
                <div class='sign-item'>
                    <div class='sign-day'>2</div>
                    <div class='sign-status'>
                        <img src="./images/sign-no.png" alt="">
                        <p></p>
                    </div>
                </div>
                <div class='sign-item'>
                    <div class='sign-day'>2</div>
                    <div class='sign-status'>
                        <img src="./images/sign-no.png" alt="">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="coin-lottery">
        <div class="container">
            <div class="section-title">
                <p>金币抽奖</p>
                <a href="./goldCoin.html">花金币，抽奖品></a>
            </div>
            <div class="content-wrap">
                <div class='content-item'>
                    <div class='content-img'>
                        <img src="./images/huawei.jpg" alt="">
                        <p></p>
                    </div>
                    <div class='content-coin'>
                        <img src="./images/coin-icon.png" alt="">
                        <p><span>5</span>金币</p>
                    </div>
                </div>
                <div class='content-item'>
                    <div class='content-img'>
                        <img src="./images/huawei.jpg" alt="">
                        <p></p>
                    </div>
                    <div class='content-coin'>
                        <img src="./images/coin-icon.png" alt="">
                        <p><span>5</span>金币</p>
                    </div>
                </div>
                <div class='content-item'>
                    <div class='content-img'>
                        <img src="./images/huawei.jpg" alt="">
                        <p></p>
                    </div>
                    <div class='content-coin'>
                        <img src="./images/coin-icon.png" alt="">
                        <p><span>5</span>金币</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="convert-shop">
        <div class="container">
            <div class="section-title">
                <p>兑换商城</p>
                <a href="./shop.html">任性，金币直接抵扣></a>
            </div>
            <div class="content-wrap">
                <div class='content-item'>
                    <div class='content-img'>
                        <img src="./images/20.png" alt="">
                        <p></p>
                    </div>
                    <div class='content-coin'>
                        <img src="./images/coin-icon.png" alt="">
                        <p><span>5</span>金币</p>
                    </div>
                </div>
                <div class='content-item'>
                    <div class='content-img'>
                        <img src="./images/30.png" alt="">
                        <p></p>
                    </div>
                    <div class='content-coin'>
                        <img src="./images/coin-icon.png" alt="">
                        <p><span>5</span>金币</p>
                    </div>
                </div>
                <div class='content-item'>
                    <div class='content-img'>
                        <img src="./images/50.png" alt="">
                        <p></p>
                    </div>
                    <div class='content-coin'>
                        <img src="./images/coin-icon.png" alt="">
                        <p><span>5</span>金币</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="pop">
        <p>恭喜您</p>
        <p>获得2金币</p>
        <p class="signinConfirm">确定</p>
    </div>
    <div class="order">
        <div class="order-wrap">
            <h4>填写购物订单</h4>
            <input type="text" placeholder="请粘贴淘宝/天猫订单号">
            <h5>提示：</h5>
            <p>只有通过”XXXXX“下单并已支付的订单才能在此提交。一个订单号只能在购物抽奖抽一次，请不要重复提交。提交成功后系统会进行判断，在您确认收货后7天无退货无退款的情况下才可抽奖。</p>
            <p>若发生退款或退货的情况，系统会自动从您的账户扣除相应的金币。</p>
            <p>如有其它问题，请联系人工客服。</p>
        </div>
        <div class="btn">
            <a href="javascript:;">提交</a>
            <a href="javascript:;">去购物</a>
        </div>
    </div>
    <div class="mask"></div>

    <script src="./script/zepto.min.js"></script>
    <script src="./script/fx.js"></script>
    <script>
        var circle = 0;
        var nowIndex = 1;
        var isRotate = true;
        $('.lottery-indicator').click(function() {
            if (isRotate) {
                isRotate = false;
                var arr = [1, 2, 3, 4, 5, 6],
                    msg;
                var lottery = 60 * Math.floor(Math.random() * arr.length);
                circle += 2;
                $('.lottery-bg').animate({
                    rotateZ: (360 * circle + lottery) + 'deg'
                }, 1000, 'ease', function() {
                    isRotate = true;
                });
                switch (lottery) {
                    case 60:
                        msg = 10;
                        break;
                    case 120:
                        msg = 1000;
                        break;
                    case 180:
                        msg = 100;
                        break;
                    case 240:
                        msg = 500;
                        break;
                    case 300:
                        msg = 50;
                        break;
                    case 360:
                        msg = 5000;
                        break;
                    case 0:
                        msg = 5000;
                        break;
                }
                console.log(msg)
            }
        });
        $('.todayInNow').click(function() {
            $('.pop').css('display', 'block');
            $('.mask').css('display', 'block');
            $("body").on('touchmove', function(event) {
                event.preventDefault();
            }, false);
        });
        $('.signinConfirm').click(function() {
            $('.pop').css('display', 'none');
            $('.mask').css('display', 'none');
            $("body").unbind('touchmove');
            if (nowIndex <= 5) {
                $('.sign-detail .sign-item').eq(nowIndex + 1).addClass('on');
                $('.sign-detail .sign-item').eq(nowIndex + 1).find('img')[0].src = './images/sign-onbig.png';

                $('.sign-detail .sign-item').each(function(index, item) {
                    if (index > nowIndex + 1) {
                        $(item).removeClass(whichHasClass(item)).addClass('');
                        $(item).find('img')[0].src = './images/sign-no.png';
                    } else if (index == nowIndex + 1) {
                        $(item).removeClass(whichHasClass(item)).addClass('on');
                        $(item).find('img')[0].src = './images/sign-onbig.png';
                    } else if (index < nowIndex + 1) {
                        $(item).removeClass(whichHasClass(item)).addClass('signed');
                        $(item).find('img')[0].src = './images/sign-on.png';
                    }
                });
                nowIndex++;
            }
        });
        $('.btn a').eq(0).click(function() {
            hiddenOrder();
        });
        $('.btn a').eq(1).click(function() {
            hiddenOrder();
        });
        $('.user-list').click(function() {
            $('.order').css('display', 'block');
            $('.mask').css('display', 'block');
            $("body").on('touchmove', function(event) {
                event.preventDefault();
            }, false);
        });

        function hiddenOrder() {
            $('.order').css('display', 'none');
            $('.mask').css('display', 'none');
            $("body").unbind('touchmove');
        }

        function whichHasClass(el) {
            if ($(el).hasClass('on')) {
                return 'on';
            } else if ($(el).hasClass('signed')) {
                return 'signed';
            } else {
                return '';
            }
        }
    </script>
</body>

</html>